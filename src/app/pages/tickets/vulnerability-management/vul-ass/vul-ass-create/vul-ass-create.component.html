<app-card-container [titleCard]="'VM.VA.TITLE' | translate">
  <!-- inicio -->
  <form class="form form-label-right" [formGroup]="formGroup">
    <div class="form-group row">
      <div class="col-lg-8">
        <div class="form-group row">
          <div class="col-lg-6 col-lg-offset-6">
            <mat-form-field class="ols-form-control" appearance="fill">
              <mat-label [translate]="'VM.FLD.REQUESTED_BY'"></mat-label>
              <input matInput [placeholder]="'VM.FLD.REQUESTED_BY' | translate" [minlength]="minLength.GENERAL"
                [maxlength]="maxLength.GENERAL" formControlName="requestedBy" readonly required />
              <mat-error>
                <app-control-error [validationSignal]="
                                    validatorService.validateArray(formControls.requestedBy, [
                                      {
                                        valType: 'required',
                                        message: ('VALIDATION.ERROR.REQUIRED' | translate)
                                      }
                                    ])
                                  ">
                </app-control-error>
              </mat-error>
            </mat-form-field>
          </div>
          <div class="col-lg-6 col-lg-offset-6">
            <mat-form-field class="ols-form-control" appearance="fill">
              <mat-label [translate]="'VM.FLD.EMAIL'"></mat-label>
              <input matInput type="email" appEmail [placeholder]="'VM.FLD.EMAIL' | translate" [minlength]="minLength.EMAIL"
                [maxlength]="maxLength.EMAIL" formControlName="email" required />
              <mat-error>
                <app-control-error [validationSignal]="
                                validatorService.validateArray(formControls.email, [
                                  {
                                    valType: 'required',
                                    message: ('VALIDATION.ERROR.REQUIRED' | translate)
                                  },
                                  {
                                    valType: 'email',
                                    message: ('VALIDATION.ERROR.EMAIL' | translate)
                                  }
                                ])
                              ">
                </app-control-error>
              </mat-error>
            </mat-form-field>
          </div>
          <div class="col-lg-6 col-lg-offset-6">
            <mat-form-field class="ols-form-control" appearance="fill">
              <mat-label [translate]="'VM.FLD.SCOTIA_ID'"></mat-label>
              <input matInput [placeholder]="'VM.FLD.SCOTIA_ID' | translate" [minlength]="minLength.GENERAL"
                [maxlength]="maxLength.GENERAL" formControlName="id" required />
              <mat-error>
                <app-control-error [validationSignal]="
                                validatorService.validateArray(formControls.id, [
                                  {
                                    valType: 'required',
                                    message: ('VALIDATION.ERROR.REQUIRED' | translate)
                                  }
                                ])
                              ">
                </app-control-error>
              </mat-error>
            </mat-form-field>
          </div>
          <div class="col-lg-6 col-lg-offset-6">
            <mat-form-field class="ols-form-control" appearance="fill">
              <mat-label [translate]="'VM.FLD.REQUEST_AREA'"></mat-label>
              <input matInput [placeholder]="'VM.FLD.REQUEST_AREA' | translate" formControlName="requestArea" readonly />
              <mat-error>
                <app-control-error [validationSignal]="
                                validatorService.validateArray(formControls.requestArea, [
                                  {
                                    valType: 'required',
                                    message: ('VALIDATION.ERROR.REQUIRED' | translate)
                                  }
                                ])
                              ">
                </app-control-error>
              </mat-error>
            </mat-form-field>
          </div>
          <div class="col-lg-6 col-lg-offset-6">
            <div class="mat-form-field-wrapper" *ngIf="isNewTicket || ticket.idStatus == 104">
              <button (click)="openRegionModal()" mat-raised-button color="warn">
                <mat-icon matPrefix>language</mat-icon>
                {{ "VM.BTN.REGION" | translate }}
              </button>
            </div>
          </div>
          <div class="col-lg-6 col-lg-offset-6">
            <mat-form-field style="display: none" class="ols-form-control" appearance="fill">
              <mat-label [translate]="'VM.FLD.SELECTED_REGIONS'"></mat-label>
              <input matInput [placeholder]="'VM.FLD.SELECTED_REGIONS' | translate" formControlName="selectedRegions"
                readonly />
            </mat-form-field>
          </div>
          <div class="col-lg-6 col-lg-offset-6">
            <mat-form-field style="display: none" class="ols-form-control" appearance="fill">
              <mat-label [translate]="'VM.FLD.SELECTED_COUNTRIES'"></mat-label>
              <input matInput [placeholder]="'VM.FLD.SELECTED_COUNTRIES' | translate" formControlName="selectedCountries"
                readonly />
            </mat-form-field>
          </div>
          <div class="col-lg-6 col-lg-offset-6">
            <mat-form-field style="display: none" class="ols-form-control" appearance="fill">
              <mat-label [translate]="'VM.FLD.ENTITY'"></mat-label>
              <input matInput [placeholder]="'VM.FLD.ENTITY' | translate" formControlName="entity" readonly />
            </mat-form-field>
          </div>
          <div class="col-lg-6 col-lg-offset-6">
            <mat-form-field class="ols-form-control" appearance="fill">
              <mat-label [translate]="'VM.FLD.SELECTED_REGIONS'"></mat-label>
              <input matInput [placeholder]="'VM.FLD.SELECTED_REGIONS' | translate" [value]="regionDesc" readonly />
            </mat-form-field>
          </div>
          <div class="col-lg-6 col-lg-offset-6">
            <mat-form-field class="ols-form-control" appearance="fill">
              <mat-label [translate]="'VM.FLD.SELECTED_COUNTRIES'"></mat-label>
              <input matInput [placeholder]="'VM.FLD.SELECTED_COUNTRIES' | translate" [value]="countriesList" readonly />
            </mat-form-field>
          </div>
          <div class="col-lg-6 col-lg-offset-6">
            <mat-form-field class="ols-form-control" appearance="fill">
              <mat-label [translate]="'VM.FLD.ENTITY'"></mat-label>
              <input matInput [placeholder]="'VM.FLD.ENTITY' | translate" [value]="entitiesList" readonly />
            </mat-form-field>
          </div>
          <div class="col-lg-6 col-lg-offset-6">
            <mat-form-field class="ols-form-control" appearance="fill">
              <mat-label [translate]="'VM.FLD.LOCAL_CISO'"></mat-label>
              <input matInput [placeholder]="'VM.FLD.LOCAL_CISO' | translate" formControlName="localCiso" readonly />
              <mat-error>
                <app-control-error [validationSignal]="
                    validatorService.validateArray(formControls.localCiso, [
                        {
                        valType: 'required',
                        message: ('VALIDATION.ERROR.REQUIRED' | translate)
                        }
                    ])
                    ">
                </app-control-error>
              </mat-error>
            </mat-form-field>
          </div>
          <div class="col-lg-6 col-lg-offset-6">
            <mat-form-field class="ols-form-control" appearance="fill">
              <mat-label [translate]="'VM.AVS.WEB-INS.EPM_CODE'"></mat-label>
              <input matInput [placeholder]="'VM.AVS.WEB-INS.EPM_CODE' | translate" formControlName="epmCode"
                [minlength]="minLength.GENERAL" [maxlength]="maxLength.GENERAL" required />
              <mat-icon style="cursor: pointer" (click)="searchEMPCode()" matSuffix>search</mat-icon>
              <mat-error>
                <app-control-error [validationSignal]="
                                validatorService.validateArray(formControls.epmCode, [
                                  {
                                    valType: 'required',
                                    message: ('VALIDATION.ERROR.REQUIRED' | translate)
                                  }
                                ])
                              ">
                </app-control-error>
              </mat-error>
            </mat-form-field>
          </div>
          <div class="col-lg-6 col-lg-offset-6">
            <mat-form-field class="ols-form-control" appearance="fill">
              <mat-label [translate]="'VM.AVS.WEB-INS.APPLICATION_NAME'"></mat-label>
              <mat-select formControlName="applicationName" (selectionChange)="onApplicationChange()" required>
                <mat-option selected disabled>Seleccione una opci&oacute;n</mat-option>
                <mat-option [value]="0">Otra aplicaci&oacute;n</mat-option>
                <mat-option *ngFor="let application of applicationList" [value]="application.id">
                  {{ application.entity }} - {{ application.name }}
                </mat-option>
              </mat-select>
              <mat-error>
                <app-control-error [validationSignal]="
                                validatorService.validateArray(formControls.applicationName, [
                                  {
                                    valType: 'required',
                                    message: ('VALIDATION.ERROR.REQUIRED' | translate)
                                  }
                                ])
                              ">
                </app-control-error>
              </mat-error>
            </mat-form-field>
          </div>
          <div class="col-lg-6 col-lg-offset-6">
            <mat-form-field class="ols-form-control" appearance="fill"
                *ngIf="formGroup.get('applicationName').value == 0">
              <mat-label [translate]="'VM.AVS.WEB-INS.APPLICATION_NAME'"></mat-label>
              <input matInput [placeholder]="'VM.AVS.WEB-INS.APPLICATION_NAME' | translate"
                formControlName="applicationNameOther" [maxlength]="maxLength.GENERAL" />
              <mat-error>
                <app-control-error [validationSignal]="
                                validatorService.validateArray(formControls.applicationNameOther, [
                                  {
                                    valType: 'required',
                                    message: ('VALIDATION.ERROR.REQUIRED' | translate)
                                  }
                                ])
                              ">
                </app-control-error>
              </mat-error>
            </mat-form-field>
          </div>
          <div class="col-lg-6 col-lg-offset-6">
            <mat-card class="card-mg-bot">
              <mat-card-content>
                <section class="example-section" formGroupName="applicationType" aria-required="true">
                  <b>{{'VM.AVS.WEB-INS.APP_TYPE' | translate}}</b>
                  <div class="form-group row">
                    <div class="col-lg-8">
                      <p *ngFor="let applicationType of applicationTypes | async">
                        <mat-checkbox [formControlName]="applicationType.value" [disabled]="epmFound" color="warn">{{ applicationType.value }}</mat-checkbox>
                      </p>
                    </div>
                  </div>
                </section>
              </mat-card-content>
            </mat-card>
          </div>
          <div class="col-lg-6 col-lg-offset-6">
            <mat-form-field class="ols-form-control" appearance="fill">
              <mat-label [translate]="'VM.FLD.BUSSINESS_UNIT'"></mat-label>
              <input matInput [placeholder]="'VM.FLD.BUSSINESS_UNIT' | translate" formControlName="businessUnit"
                [disabled]="epmFound" [maxlength]="maxLength.GENERAL" />
            </mat-form-field>
          </div>
          <div class="col-lg-6 col-lg-offset-6">
            <mat-form-field class="ols-form-control" appearance="fill">
              <mat-label [translate]="'VM.FLD.BUSSINESS_CHANNEL'"></mat-label>
              <mat-select formControlName="businessChannel">
                <mat-option selected disabled>Seleccione una opci&oacute;n</mat-option>
                <mat-option *ngFor="let business of businessChannelList" [value]="business.id">
                  {{ business.value }}
                </mat-option>
              </mat-select>
            </mat-form-field>
          </div>
          <div class="col-lg-6 col-lg-offset-6">
            <mat-form-field class="ols-form-control" appearance="fill">
              <mat-label [translate]="'VM.VA.FLD.APP_VERSION'"></mat-label>
              <input disabled matInput [placeholder]="'VM.VA.FLD.APP_VERSION' | translate"
                formControlName="applicationVersion" [minlength]="minLength.NUMBER" [maxlength]="maxLength.NUMBER"
                required />
              <mat-error>
                <app-control-error [validationSignal]="
                    validatorService.validateArray(formControls.applicationVersion, [
                      {
                        valType: 'required',
                        message: ('VALIDATION.ERROR.REQUIRED' | translate)
                      }
                    ])
                  ">
                </app-control-error>
              </mat-error>
            </mat-form-field>
          </div>
          <div class="col-lg-6 col-lg-offset-6">
            <mat-form-field class="ols-form-control" appearance="fill">
              <mat-label [translate]="'VM.VA.FLD.APP_EMAIL'"></mat-label>
              <input matInput type="email" appEmail [placeholder]="'VM.VA.FLD.APP_EMAIL' | translate"
                formControlName="applicationEmail" [minlength]="minLength.EMAIL" [maxlength]="maxLength.EMAIL" required />
              <mat-error>
                <app-control-error [validationSignal]="
                    validatorService.validateArray(formControls.applicationEmail, [
                      {
                        valType: 'required',
                        message: ('VALIDATION.ERROR.REQUIRED' | translate)
                      }
                    ])
                  ">
                </app-control-error>
              </mat-error>
            </mat-form-field>
          </div>
          <div class="col-lg-6 col-lg-offset-6">
            <mat-form-field class="ols-form-control" appearance="fill">
              <mat-label [translate]="'VM.VA.FLD.ID_TO_PRODUCCTION'"></mat-label>
              <input matInput [placeholder]="'VM.VA.FLD.ID_TO_PRODUCCTION' | translate" formControlName="idToProducction"
                [minlength]="minLength.GENERAL" [maxlength]="maxLength.GENERAL" required />
              <mat-error>
                <app-control-error [validationSignal]="
                    validatorService.validateArray(formControls.idToProducction, [
                      {
                        valType: 'required',
                        message: ('VALIDATION.ERROR.REQUIRED' | translate)
                      }
                    ])
                  ">
                </app-control-error>
              </mat-error>
            </mat-form-field>
          </div>
          <div class="col-lg-6">
            <mat-form-field class="ols-form-control" appearance="fill">
              <mat-label [translate]="'VM.VA.FLD.APP_PROMOTE'"></mat-label>
              <mat-select formControlName="applicationPromote" required>
                <mat-option selected disabled>Selecciona una opci&oacute;n</mat-option>
                <mat-option *ngFor="let applicationPromote of applicationPromoteList" [value]="applicationPromote.id">
                  {{ applicationPromote.description }}
                </mat-option>
              </mat-select>
              <mat-error>
                <app-control-error [validationSignal]="
                    validatorService.validateArray(formControls.applicationPromote, [
                      {
                        valType: 'required',
                        message: ('VALIDATION.ERROR.REQUIRED' | translate)
                      }
                    ])
                  ">
                </app-control-error>
              </mat-error>
            </mat-form-field>
          </div>
          <div class="col-lg-6">
            <mat-form-field *ngIf="formControls.applicationPromote.value === 0" class="ols-form-control" appearance="fill">
              <mat-label [translate]="'VM.VA.FLD.APP_PROMOTE_SPECIFY'"></mat-label>
              <input matInput [placeholder]="'VM.VA.FLD.APP_PROMOTE_SPECIFY' | translate"
                formControlName="applicationPrometeSpecify" />
            </mat-form-field>
          </div>
          <div class="col-lg-6">
            <mat-form-field class="ols-form-control" appearance="fill">
              <mat-label [translate]="'VM.VA.FLD.APP_PROMOTE_DATE'"></mat-label>
              <input matInput type="date" [placeholder]="'VM.VA.FLD.APP_PROMOTE_DATE' | translate"
                formControlName="productionDate" />
            </mat-form-field>
          </div>
          <div class="col-lg-6">
            <mat-checkbox formControlName="emergencyChange">{{ 'VM.VA.FLD.EMERGENCY_CHANGE' | translate }}
            </mat-checkbox>
          </div>
        </div>
      </div>
      <div class="col-lg-4">
        <div class="form-group row">
          <div class="col-lg-12">
            <ng-container *ngIf="!isNewTicket">
              <app-vul-ass-view (viewData)="getViewData($event)"></app-vul-ass-view>
            </ng-container>
          </div>
        </div>
      </div>
    </div>
    <ng-container *ngIf="isNewTicket || ticket.idStatus == 104">
      <div class="form-group row">
        <div class="col-lg-6">
          <h3 [translate]="'An&aacute;lisis est&aacute;tico'"></h3>
        </div>
        <div class="col-lg-6" *ngIf="isNewTicket || ticket.idStatus == 104">
          <!-- <div class="mat-form-field-wrapper"> -->
          <button class="mr-4" mat-raised-button color="warn" (click)="openModalAppAnalysis('staticAnalysis')">
            <mat-icon matPrefix>add</mat-icon>
            {{ 'VM.VA.ADD_APP' | translate }}
          </button>
          <!-- </div>        -->
        </div>
      </div>
      <div class="form-group row">
        <div class="col-lg-12">
          <!-- Table -->
          <table #table mat-table [dataSource]="staticAnalysisData" class="mat-elevation-z8 w-75">
            <ng-container matColumnDef="name">
              <th mat-header-cell *matHeaderCellDef [translate]="'VM.VA.ANALYSIS_COL.NAME' | translate"></th>
              <td mat-cell *matCellDef="let row">{{ row.name }}</td>
            </ng-container>

            <ng-container matColumnDef="version">
              <th mat-header-cell *matHeaderCellDef [translate]="'VM.VA.ANALYSIS_COL.VERSION' | translate"></th>
              <td mat-cell *matCellDef="let row">{{ row.version }}</td>
            </ng-container>

            <ng-container matColumnDef="date">
              <th mat-header-cell *matHeaderCellDef [translate]="'VM.VA.ANALYSIS_COL.DATE' | translate"></th>
              <td mat-cell *matCellDef="let row">{{ row.date }}</td>
            </ng-container>

            <ng-container matColumnDef="actions">
              <th mat-header-cell *matHeaderCellDef></th>
              <td mat-cell *matCellDef="let row; let i = index">
                <ng-container *ngIf="isNewTicket || ticket.idStatus == 104">
                  <button mat-icon-button color="warn" (click)="editAppAnalysis('staticAnalysis', row, i)">
                    <mat-icon>edit</mat-icon>
                  </button>
                  <button mat-icon-button color="warn" (click)="deleteAppAnalysis('staticAnalysis', i)">
                    <mat-icon>delete</mat-icon>
                  </button>
                </ng-container>
              </td>
            </ng-container>

            <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
            <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
            <tr class="mat-row" *matNoDataRow>
              <td class="mat-cell" colspan="4">No data</td>
            </tr>
          </table>
        </div>
      </div>
      <div class="form-group row">
        <div class="col-lg-6">
          <h3 [translate]="'An&aacute;lisis composici&oacute;n de software'"></h3>
        </div>
        <div class="col-lg-6" *ngIf="isNewTicket || ticket.idStatus == 104">
          <button class="mr-4" mat-raised-button color="warn" (click)="openModalAppAnalysis('compositionAnalysis')">
            <mat-icon matPrefix>add</mat-icon>
            {{ 'VM.VA.ADD_APP' | translate }}
          </button>
        </div>
      </div>
      <div class="form-group row">
        <div class="col-lg-12">
          <!-- Table -->
          <table #table mat-table [dataSource]="compositionAnalysisData" class="mat-elevation-z8 w-75">
            <ng-container matColumnDef="name">
              <th mat-header-cell *matHeaderCellDef [translate]="'VM.VA.ANALYSIS_COL.NAME' | translate"></th>
              <td mat-cell *matCellDef="let row">{{ row.name }}</td>
            </ng-container>

            <ng-container matColumnDef="version">
              <th mat-header-cell *matHeaderCellDef [translate]="'VM.VA.ANALYSIS_COL.VERSION' | translate"></th>
              <td mat-cell *matCellDef="let row">{{ row.version }}</td>
            </ng-container>

            <ng-container matColumnDef="date">
              <th mat-header-cell *matHeaderCellDef [translate]="'VM.VA.ANALYSIS_COL.DATE' | translate"></th>
              <td mat-cell *matCellDef="let row">{{ row.date }}</td>
            </ng-container>

            <ng-container matColumnDef="actions">
              <th mat-header-cell *matHeaderCellDef></th>
              <td mat-cell *matCellDef="let row; let i = index">
                <ng-container *ngIf="isNewTicket || ticket.idStatus == 104">
                  <button mat-icon-button color="warn" (click)="editAppAnalysis('compositionAnalysis', row, i)">
                    <mat-icon>edit</mat-icon>
                  </button>
                  <button mat-icon-button color="warn" (click)="deleteAppAnalysis('compositionAnalysis', i)">
                    <mat-icon>delete</mat-icon>
                  </button>
                </ng-container>
              </td>
            </ng-container>

            <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
            <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
            <tr class="mat-row" *matNoDataRow>
              <td class="mat-cell" colspan="4">No data</td>
            </tr>
          </table>
        </div>
      </div>
      <div class="form-group row">
        <div class="col-lg-6">
          <h3 [translate]="'An&aacute;lisis din&aacute;mico'"></h3>
        </div>
        <div class="col-lg-6" *ngIf="isNewTicket || ticket.idStatus == 104">
          <button class="mr-4" mat-raised-button color="warn" (click)="openModalAppAnalysis('dynamicAnalysis')">
            <mat-icon matPrefix>add</mat-icon>
            {{ 'VM.VA.ADD_APP' | translate }}
          </button>
        </div>
      </div>
      <div class="form-group row">
        <div class="col-lg-12">
          <!-- Table -->
          <table #table mat-table [dataSource]="dynamicAnalysisData" class="mat-elevation-z8 w-75">
            <ng-container matColumnDef="name">
              <th mat-header-cell *matHeaderCellDef [translate]="'VM.VA.ANALYSIS_COL.NAME' | translate"></th>
              <td mat-cell *matCellDef="let row">{{ row.name }}</td>
            </ng-container>

            <ng-container matColumnDef="version">
              <th mat-header-cell *matHeaderCellDef [translate]="'VM.VA.ANALYSIS_COL.VERSION' | translate"></th>
              <td mat-cell *matCellDef="let row">{{ row.version }}</td>
            </ng-container>

            <ng-container matColumnDef="date">
              <th mat-header-cell *matHeaderCellDef [translate]="'VM.VA.ANALYSIS_COL.DATE' | translate"></th>
              <td mat-cell *matCellDef="let row">{{ row.date }}</td>
            </ng-container>

            <ng-container matColumnDef="actions">
              <th mat-header-cell *matHeaderCellDef></th>
              <td mat-cell *matCellDef="let row; let i = index">
                <ng-container *ngIf="isNewTicket || ticket.idStatus == 104">
                  <button mat-icon-button color="warn" (click)="editAppAnalysis('dynamicAnalysis', row, i)">
                    <mat-icon>edit</mat-icon>
                  </button>
                  <button mat-icon-button color="warn" (click)="deleteAppAnalysis('dynamicAnalysis', i)">
                    <mat-icon>delete</mat-icon>
                  </button>
                </ng-container>
              </td>
            </ng-container>

            <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
            <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
            <tr class="mat-row" *matNoDataRow>
              <td class="mat-cell" colspan="4">No data</td>
            </tr>
          </table>
        </div>
      </div>
    </ng-container>
    <ng-container *ngIf="!isNewTicket && userPolicies.includes('IS&C_Staff_Ejecutor')">
      <div class="form-group row">
        <div class="col-lg-12">
          <!-- Table -->
          <table #table mat-table [dataSource]="dataSource" class="mat-elevation-z8 w-75">
            <ng-container matColumnDef="evaluationType">
              <th mat-header-cell *matHeaderCellDef
                [translate]="'VM.VA.EVALUATION_TYPE_COL.EVALUATION_TYPE' | translate"></th>
              <td mat-cell *matCellDef="let row">{{ evaluationTypeDescription[row.evaluationType] | translate }}</td>
            </ng-container>

            <ng-container matColumnDef="name">
              <th mat-header-cell *matHeaderCellDef [translate]="'VM.VA.EVALUATION_TYPE_COL.PROJECT' | translate"></th>
              <td mat-cell *matCellDef="let row">{{ row.name }}</td>
            </ng-container>

            <ng-container matColumnDef="version">
              <th mat-header-cell *matHeaderCellDef [translate]="'VM.VA.EVALUATION_TYPE_COL.VERSION' | translate"></th>
              <td mat-cell *matCellDef="let row">{{ row.version }}</td>
            </ng-container>

            <ng-container matColumnDef="date">
              <th mat-header-cell *matHeaderCellDef [translate]="'VM.VA.EVALUATION_TYPE_COL.DATE' | translate"></th>
              <td mat-cell *matCellDef="let row">{{ row.date }}</td>
            </ng-container>

            <ng-container matColumnDef="result">
              <th mat-header-cell *matHeaderCellDef [translate]="'VM.VA.EVALUATION_TYPE_COL.RESULT' | translate"></th>
              <td mat-cell *matCellDef="let row">{{ row.result ? row.result : '' }}</td>
            </ng-container>

            <ng-container matColumnDef="assigned">
              <th mat-header-cell *matHeaderCellDef [translate]="'VM.VA.EVALUATION_TYPE_COL.ASSIGNED' | translate"></th>
              <td mat-cell *matCellDef="let row">{{ row.assigned ? row.assigned : '' }}</td>
            </ng-container>

            <ng-container matColumnDef="critics">
              <th mat-header-cell *matHeaderCellDef [translate]="'VM.VA.EVALUATION_TYPE_COL.CRITICS' | translate"></th>
              <td mat-cell *matCellDef="let row">{{ row.critics ? row.critics : '' }}</td>
            </ng-container>

            <ng-container matColumnDef="high">
              <th mat-header-cell *matHeaderCellDef [translate]="'VM.VA.EVALUATION_TYPE_COL.HIGH' | translate"></th>
              <td mat-cell *matCellDef="let row">{{ row.high ? row.high : '' }}</td>
            </ng-container>

            <ng-container matColumnDef="medium">
              <th mat-header-cell *matHeaderCellDef [translate]="'VM.VA.EVALUATION_TYPE_COL.MEDIUM' | translate"></th>
              <td mat-cell *matCellDef="let row">{{ row.medium ? row.medium : '' }}</td>
            </ng-container>

            <ng-container matColumnDef="low">
              <th mat-header-cell *matHeaderCellDef [translate]="'VM.VA.EVALUATION_TYPE_COL.LOW' | translate"></th>
              <td mat-cell *matCellDef="let row">{{ row.low ? row.low : '' }}</td>
            </ng-container>

            <ng-container matColumnDef="actions">
              <th mat-header-cell *matHeaderCellDef></th>
              <td mat-cell *matCellDef="let row; let i = index">
                <button mat-icon-button color="warn" (click)="editAppAnalysis(row.evaluationType, row, i)">
                  <mat-icon>edit</mat-icon>
                </button>
              </td>
            </ng-container>

            <tr mat-header-row *matHeaderRowDef="displayedColumns2"></tr>
            <tr mat-row *matRowDef="let row; columns: displayedColumns2"></tr>
            <tr class="mat-row" *matNoDataRow>
              <td class="mat-cell" colspan="4">No data</td>
            </tr>
          </table>
        </div>
      </div>
    </ng-container>
    <ng-container>
      <div class="form-group row">
        <div class="col-lg-8">
          <mat-form-field class="ols-form-control" appearance="fill">
            <mat-label [translate]="'VM.VA.QUESTION1' | translate"></mat-label>
            <mat-select formControlName="question1" required>
              <mat-option selected disabled>Selecciona una opci&oacute;n</mat-option>
              <mat-option [value]="true">Si</mat-option>
              <mat-option [value]="false">No</mat-option>
            </mat-select>
            <mat-error>
              <app-control-error [validationSignal]="
                  validatorService.validateArray(formControls.question1, [
                    {
                      valType: 'required',
                      message: ('VALIDATION.ERROR.REQUIRED' | translate)
                    }
                  ])
                ">
              </app-control-error>
            </mat-error>
          </mat-form-field>
          <mat-form-field class="ols-form-control" appearance="fill">
            <mat-label [translate]="
                'VM.VA.QUESTION2' | translate
              "></mat-label>
            <mat-select formControlName="question2" required>
              <mat-option selected disabled>Selecciona una opci&oacute;n</mat-option>
              <mat-option [value]="true">Si</mat-option>
              <mat-option [value]="false">No</mat-option>
            </mat-select>
            <mat-error>
              <app-control-error [validationSignal]="
                  validatorService.validateArray(formControls.question2, [
                    {
                      valType: 'required',
                      message: ('VALIDATION.ERROR.REQUIRED' | translate)
                    }
                  ])
                ">
              </app-control-error>
            </mat-error>
          </mat-form-field>
          <mat-form-field class="ols-form-control" appearance="fill">
            <mat-label [translate]="'VM.VA.QUESTION3' | translate"></mat-label>
            <mat-select formControlName="question3" required>
              <mat-option selected disabled>Selecciona una opci&oacute;n</mat-option>
              <mat-option [value]="true">Si</mat-option>
              <mat-option [value]="false">No</mat-option>
            </mat-select>
            <mat-error>
              <app-control-error [validationSignal]="
                  validatorService.validateArray(formControls.question3, [
                    {
                      valType: 'required',
                      message: ('VALIDATION.ERROR.REQUIRED' | translate)
                    }
                  ])
                ">
              </app-control-error>
            </mat-error>
          </mat-form-field>
          <mat-form-field class="ols-form-control" appearance="fill">
            <mat-label [translate]="
                'VM.VA.QUESTION4' | translate
              "></mat-label>
            <mat-select formControlName="question4" required>
              <mat-option selected disabled>Selecciona una opci&oacute;n</mat-option>
              <mat-option [value]="true">Si</mat-option>
              <mat-option [value]="false">No</mat-option>
            </mat-select>
            <mat-error>
              <app-control-error [validationSignal]="
                  validatorService.validateArray(formControls.question4, [
                    {
                      valType: 'required',
                      message: ('VALIDATION.ERROR.REQUIRED' | translate)
                    }
                  ])
                ">
              </app-control-error>
            </mat-error>
          </mat-form-field>
        </div>
      </div>
    </ng-container>
    <ng-container *ngIf="!isNewTicket">
      <div class="form-group row">
        <div class="col-lg-4">
          <div class="mat-form-field-wrapper" *ngIf="ticket.idStatus == 5">
            <app-file-upload [label]="'VM.VA.BUTTON.RESOLUTION_FILE' | translate" 
              (onFile)="pushObjFile($event)" [control]="'resolution'">
            </app-file-upload>
            <app-uploaded-file [objFile]="getFileByControl('resolution')"></app-uploaded-file>
            <!-- <button type="button" mat-raised-button color="warn">
              <mat-icon matPrefix>upload</mat-icon>
              {{'VM.VA.BUTTON.RESOLUTION_FILE' | translate}}
            </button> -->
          </div>
          <mat-form-field class="ols-form-control" appearance="fill">
            <mat-label [translate]="'VM.VA.GENERAL_RESOLUTION' | translate"></mat-label>
            <mat-select formControlName="generalResolution">
              <mat-option selected disabled>Selecciona una opci&oacute;n</mat-option>
              <mat-option *ngFor="let general of generalResolutionList" [value]="general">
                {{ general }}
              </mat-option>
            </mat-select>
          </mat-form-field>
          <mat-form-field class="ols-form-control" appearance="fill">
            <mat-label [translate]="'VM.VA.EPIC_TICKET' | translate"></mat-label>
            <input matInput [placeholder]="'VM.VA.EPIC_TICKET' | translate" formControlName="epicTicket" />
          </mat-form-field>
        </div>
      </div>
    </ng-container>

    <app-action-plans [ticket]="ticket"
      *ngIf="!isNewTicket && ticket && (userPolicies.includes('IS&C_Staff_Ejecutor')) && (ticket.idStatus == 5 || ticket.idStatus == 7 || ticket.idStatus == 8)">
    </app-action-plans>

    <mat-form-field *ngIf="!isNewTicket || ticket.idStatus == 104" class="example-full-width">
      <textarea matInput readonly id="comments" formControlName="comments" [placeholder]="'VM.AVS.COMMENTS' | translate"
        rows="6"></textarea>
    </mat-form-field>

    <mat-form-field *ngIf="ticket.idStatus == 5 || ticket.idStatus == 104 || isNewTicket" class="example-full-width">
      <textarea matInput id="additionalComments" formControlName="additionalComments"
        [placeholder]="'VM.AVS.ADITIONAL_COMMENTS' | translate" [maxlength]="maxLength.COMMENTS"></textarea>
    </mat-form-field>

    <app-udf [formName]="FORM_NAME" (getFormGroup)="setUdfForm($event)"></app-udf>

    <app-action-buttons [ticket]="ticket" [canBeClosed]="canBeClosed" [form]="formGroup"
      *ngIf="!isNewTicket && ticket && (userPolicies.includes('IS&C_Staff_Ejecutor'))">
    </app-action-buttons>

    <div class="form-group row" *ngIf="isNewTicket">
      <div class="col-lg-12">
        <button class="mr-4 ols-action-buttons" (click)="onSubmit()" mat-raised-button color="warn">
          {{ "VM.BTN.SEND" | translate }}
        </button>
        <button class="ols-action-buttons" mat-raised-button (click)="goToList()" color="warn">
          {{ "VM.BTN.CANCEL" | translate }}
        </button>
      </div>
    </div>
  </form>
</app-card-container>