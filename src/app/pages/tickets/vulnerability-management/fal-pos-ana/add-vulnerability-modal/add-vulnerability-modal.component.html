<app-base-modal [modalTitle]="(isNewTicket ? 'VM.FP.FPM.TITLE' : 'VM.FP.FPM.TITLE_RESOLUTION') | translate">
    <div modal-body>
        <form class="form form-label-right" [formGroup]="formGroup">
            <div class="row" class="text-center">
                <div class="col-lg-12">
                    <p *ngIf="formGroup.get('vulnerabilityName').value">Nombre: {{ formGroup.get('vulnerabilityName').value }}</p>
                    <p *ngIf="formGroup.get('severity').value">Severidad: {{ formGroup.get('severityDes').value }}</p>
                </div>
            </div>
            <div class="form-group row">
                <div class="col-lg-12">
                    <mat-form-field class="ols-form-control" appearance="fill" *ngIf="isNewTicket || idStatus == 104">
                        <mat-label [translate]="'VM.FP.FPM.NAME' | translate"></mat-label>
                        <input matInput [placeholder]="'VM.FP.FPM.NAME' | translate"
                            formControlName="vulnerabilityName" [minlength]="minLength.GENERAL" [maxlength]="maxLength.GENERAL"
                            required />
                        <mat-error>
                            <app-control-error [validationSignal]="validatorService.validateArray(formControls.vulnerabilityName, 
                  [{valType:'required',message:('VALIDATION.ERROR.REQUIRED' | translate)}])">
                            </app-control-error>
                        </mat-error>
                    </mat-form-field>
                    <mat-form-field class="ols-form-control" appearance="fill" *ngIf="isNewTicket || idStatus == 104">
                        <mat-label [translate]="'VM.FP.FPM.SEVERITY' | translate"></mat-label>
                        <mat-select formControlName="severity" (selectionChange)="severityChange()" required>
                            <mat-option selected disabled>Seleccione una opci&oacute;n</mat-option>
                            <mat-option *ngFor="let severity of severityList" [value]="severity.id">
                                {{ severity.description }}
                            </mat-option>
                        </mat-select>
                        <!-- <input matInput [placeholder]="'VM.FP.FPM.SEVERITY' | translate" 
                            formControlName="severity" [minlength]="minLength.GENERAL" [maxlength]="maxLength.GENERAL" /> -->
                        <mat-error>
                            <app-control-error [validationSignal]="validatorService.validateArray(formControls.severity, 
                  [{valType:'required',message:('VALIDATION.ERROR.REQUIRED' | translate)}])">
                            </app-control-error>
                        </mat-error>
                    </mat-form-field>
                    <mat-form-field class="ols-form-control" appearance="fill" *ngIf="isNewTicket || idStatus == 104">
                        <mat-label [translate]="'VM.FP.FPM.LOCATION' | translate"></mat-label>
                        <input matInput type="text" [placeholder]="'VM.FP.FPM.LOCATION' | translate"
                            formControlName="location" [minlength]="minLength.GENERAL" [maxlength]="maxLength.GENERAL"
                            required />
                        <mat-error>
                            <app-control-error [validationSignal]="validatorService.validateArray(formControls.location, 
                  [{valType:'required',message:('VALIDATION.ERROR.REQUIRED' | translate)}])">
                            </app-control-error>
                        </mat-error>
                    </mat-form-field>
                    <mat-form-field class="ols-form-control" appearance="fill" *ngIf="isNewTicket || idStatus == 104">
                        <mat-label [translate]="'VM.FP.FPM.REASON' | translate"></mat-label>
                        <input matInput type="text" [placeholder]="'VM.FP.FPM.REASON' | translate"
                            formControlName="reason" [minlength]="minLength.GENERAL" [maxlength]="maxLength.GENERAL"
                            required />
                        <mat-error>
                            <app-control-error [validationSignal]="validatorService.validateArray(formControls.reason, 
                  [{valType:'required',message:('VALIDATION.ERROR.REQUIRED' | translate)}])">
                            </app-control-error>
                        </mat-error>
                    </mat-form-field>
                    <mat-form-field class="ols-form-control" appearance="fill" *ngIf="userPolicies.includes('IS&C_Staff_Ejecutor')">
                        <mat-label [translate]="'VM.FP.FPM.RESOLUTION' | translate"></mat-label>
                        <mat-select formControlName="resolution">
                            <mat-option selected disabled>Seleccione una opci&oacute;n</mat-option>
                            <mat-option [value]="'rejected'">Rechazado</mat-option>
                            <mat-option [value]="'confirmed'">Confirmado</mat-option>
                            <!-- <mat-option *ngFor="let resolution of resolutionList" [value]="resolution.id">
                                {{ resolution.description }}
                            </mat-option> -->
                        </mat-select>
                        <!-- <mat-error>
                            <app-control-error [validationSignal]="validatorService.validateArray(formControls.resolution, 
                  [{valType:'required',message:('VALIDATION.ERROR.REQUIRED' | translate)}])">
                            </app-control-error>
                        </mat-error> -->
                    </mat-form-field>
                </div>
            </div>
        </form>
    </div>
    <div modal-footer>
        <button class="mr-6" mat-raised-button color="warn" (click)="this.closeModal()">
            {{ 'BUTTONS.CANCEL' | translate}}
        </button>
        <button mat-raised-button color="warn" (click)="save()">
            {{ 'BUTTONS.SAVE' | translate}}
        </button>
    </div>
</app-base-modal>