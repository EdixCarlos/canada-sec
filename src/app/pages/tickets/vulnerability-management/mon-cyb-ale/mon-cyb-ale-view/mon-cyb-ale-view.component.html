<form action="" [formGroup]="formGroup">
    <mat-form-field class="ols-form-control" appearance="fill">
        <mat-label [translate]="'VM.VIEW.FLD.NRO_TICKET'"></mat-label>
        <input matInput [placeholder]="'VM.VIEW.FLD.NRO_TICKET' | translate" formControlName="nroTicket" />
    </mat-form-field>
    <mat-form-field class="ols-form-control" appearance="fill">
        <mat-label [translate]="'VM.VIEW.FLD.REQUEST_DATE'"></mat-label>
        <input matInput [placeholder]="'VM.VIEW.FLD.REQUEST_DATE' | translate" formControlName="requestDate" />
    </mat-form-field>
    <mat-form-field class="ols-form-control" appearance="fill" *ngIf="ticket.attentionDate !== null">
        <mat-label [translate]="'VM.VIEW.FLD.ATTENTION_DATE'"></mat-label>
        <input matInput [placeholder]="'VM.VIEW.FLD.ATTENTION_DATE' | translate" [minlength]="minLength.GENERAL"
            [maxlength]="maxLength.GENERAL" formControlName="attentionDate" />
    </mat-form-field>
    <mat-form-field class="ols-form-control" appearance="fill">
        <mat-label [translate]="'VM.VIEW.FLD.STATE'"></mat-label>
        <input matInput [placeholder]="'VM.VIEW.FLD.STATE' | translate" formControlName="idStatus" 
            [value]="formGroup.get('idStatus').value | translate" />
    </mat-form-field>
    <mat-form-field class="ols-form-control" appearance="fill" *ngIf="formGroup.get('assigned').value !== null">
        <mat-label [translate]="'VM.VIEW.FLD.ASSIGNED'"></mat-label>
        <input matInput [placeholder]="'VM.VIEW.FLD.ASSIGNED' | translate" formControlName="assigned" />
    </mat-form-field>
    <mat-form-field class="ols-form-control" appearance="fill" *ngIf="formGroup.get('emailAssigned').value !== null">
        <mat-label [translate]="'VM.VIEW.FLD.EMAIL_ASSIGNED'"></mat-label>
        <input matInput [placeholder]="'VM.VIEW.FLD.EMAIL_ASSIGNED' | translate" formControlName="emailAssigned" />
    </mat-form-field>
    <mat-form-field class="ols-form-control" appearance="fill" *ngIf="ticket.idStatus == 5 || ticket.idStatus == 7 || ticket.idStatus == 8">
        <mat-label [translate]="'VM.VIEW.FLD.PROGRESS'"></mat-label>
        <input matInput [placeholder]="0" appPercentage [minlength]="minLength.NUMBER" [maxlength]="maxLength.PORCENT"
            formControlName="progress" (change)="sendViewData()" [readonly]="ticket.idStatus !== 5" />
        <span matSuffix>%</span>
    </mat-form-field>
    <mat-form-field class="ols-form-control" appearance="fill" *ngIf="(userPolicies.includes('IS&C_Staff_Ejecutor') && (ticket.idStatus === 7 || ticket.idStatus === 5)) || 
        (!userPolicies.includes('IS&C_Staff_Ejecutor') && ticket.idStatus === 7)">
        <mat-label [translate]="'VM.VIEW.CYBER.FLD.RESOLUTION'"></mat-label>
        <mat-select formControlName="resolution" (selectionChange)="sendViewData()">
            <mat-option selected disabled>Seleccione una opci&oacute;n</mat-option>
            <mat-option *ngFor="let resolution of resolutionList" [value]="resolution.id">
              {{ resolution.description }}
            </mat-option>
        </mat-select>
    </mat-form-field>
    <mat-form-field class="ols-form-control" appearance="fill" *ngIf="(userPolicies.includes('IS&C_Staff_Ejecutor') && (ticket.idStatus === 7 || ticket.idStatus === 5)) || 
        (!userPolicies.includes('IS&C_Staff_Ejecutor') && ticket.idStatus === 7)">
        <mat-label [translate]="'VM.VIEW.CYBER.FLD.RESOLUTION_REASON'"></mat-label>
        <mat-select formControlName="resolutionReason" (selectionChange)="sendViewData()">
            <mat-option selected disabled>Seleccione una opci&oacute;n</mat-option>
            <mat-option *ngFor="let resolutionReason of resolutionReasonList" [value]="resolutionReason.id">
              {{ resolutionReason.description }}
            </mat-option>
        </mat-select>
    </mat-form-field>
    <app-file-upload [label]="'Cargar archivo de evidencias'" (onFile)="pushObjFile($event)" [control]="'vulReport'"></app-file-upload>
    <app-uploaded-file *ngIf="ticket && objFile" [objFile]="getFileByControl('vulReport')"></app-uploaded-file>
</form>