<form action="" [formGroup]="formGroup">
    <mat-form-field class="ols-form-control" appearance="fill">
        <mat-label [translate]="'VM.VIEW.FLD.NRO_TICKET'"></mat-label>
        <input matInput [placeholder]="'VM.VIEW.FLD.NRO_TICKET' | translate" formControlName="nroTicket" />
    </mat-form-field>
    <mat-form-field class="ols-form-control" appearance="fill">
        <mat-label [translate]="'VM.VIEW.FLD.REQUEST_DATE'"></mat-label>
        <input matInput [placeholder]="'VM.VIEW.FLD.REQUEST_DATE' | translate" formControlName="requestDate" />
    </mat-form-field>
    <mat-form-field class="ols-form-control" appearance="fill" *ngIf="ticket.attentionDate !== null">
        <mat-label [translate]="'VM.VIEW.FLD.ATTENTION_DATE'"></mat-label>
        <input matInput [placeholder]="'VM.VIEW.FLD.ATTENTION_DATE' | translate" [minlength]="minLength.GENERAL"
            [maxlength]="maxLength.GENERAL" formControlName="attentionDate" />
    </mat-form-field>
    <mat-form-field class="ols-form-control" appearance="fill">
        <mat-label [translate]="'VM.VIEW.FLD.STATE'"></mat-label>
        <input matInput [placeholder]="'VM.VIEW.FLD.STATE' | translate" formControlName="idStatus" 
            [value]="formGroup.get('idStatus').value | translate" />
    </mat-form-field>
    <mat-form-field class="ols-form-control" appearance="fill" *ngIf="formGroup.get('assigned').value !== null">
        <mat-label [translate]="'VM.VIEW.FLD.ASSIGNED'"></mat-label>
        <input matInput [placeholder]="'VM.VIEW.FLD.ASSIGNED' | translate" formControlName="assigned" />
    </mat-form-field>
    <mat-form-field class="ols-form-control" appearance="fill" *ngIf="formGroup.get('emailAssigned').value !== null">
        <mat-label [translate]="'VM.VIEW.FLD.EMAIL_ASSIGNED'"></mat-label>
        <input matInput [placeholder]="'VM.VIEW.FLD.EMAIL_ASSIGNED' | translate" formControlName="emailAssigned" />
    </mat-form-field>

    <ng-container
        *ngIf="(ticket.idStatus == 5 && userPolicies.includes('IS&C_Staff_Ejecutor')) || ticket.idStatus == 7 || ticket.idStatus == 8">
        <mat-form-field class="ols-form-control" appearance="fill" *ngIf="formGroup.get('critic').value !== null">
            <mat-label [translate]="'Vulnerabilidad Crítica'"></mat-label>
            <input (change)="updateForm()" matInput [placeholder]="'Vulnerabilidad Crítica'" 
                formControlName="critic" [maxlength]="maxLength.GENERAL" />
        </mat-form-field>
        <mat-form-field class="ols-form-control" appearance="fill" *ngIf="formGroup.get('high').value !== null">
            <mat-label [translate]="'Vulnerabilidad Alta'"></mat-label>
            <input (change)="updateForm()" matInput [placeholder]="'Vulnerabilidad Alta'" 
                formControlName="high" [maxlength]="maxLength.GENERAL" />
        </mat-form-field>
        <mat-form-field class="ols-form-control" appearance="fill" *ngIf="formGroup.get('medium').value !== null">
            <mat-label [translate]="'Vulnerabilidad Media'"></mat-label>
            <input (change)="updateForm()" matInput [placeholder]="'Vulnerabilidad Media'" 
                formControlName="medium" [maxlength]="maxLength.GENERAL" />
        </mat-form-field>
        <mat-form-field class="ols-form-control" appearance="fill" *ngIf="formGroup.get('low').value !== null">
            <mat-label [translate]="'Vulnerabilidad Baja'"></mat-label>
            <input (change)="updateForm()" matInput [placeholder]="'Vulnerabilidad Baja'" 
                formControlName="low" [maxlength]="maxLength.GENERAL" />
        </mat-form-field>
        <mat-form-field class="ols-form-control" appearance="fill" *ngIf="formGroup.get('riskLevel').value !== null">
            <mat-label [translate]="'Nivel de Riesgo'"></mat-label>
            <input (change)="updateForm()" matInput [placeholder]="'Nivel de Riesgo'" 
                formControlName="riskLevel" [maxlength]="maxLength.GENERAL" />
        </mat-form-field>
        <mat-form-field class="ols-form-control" appearance="fill" *ngIf="formGroup.get('result').value !== null">
            <mat-label [translate]="'Resultado de solicitud'"></mat-label>
            <input (change)="updateForm()" matInput [placeholder]="'Resultado de solicitud'" 
                formControlName="result" [maxlength]="maxLength.GENERAL" />
        </mat-form-field>
        <mat-form-field class="ols-form-control" appearance="fill" *ngIf="ticket.idStatus == 5 || ticket.idStatus == 7 || ticket.idStatus == 8">
            <mat-label [translate]="'VM.VIEW.FLD.PROGRESS'"></mat-label>
            <input matInput [placeholder]="0" appPercentage [minlength]="minLength.NUMBER" [maxlength]="maxLength.PORCENT"
                formControlName="progress" (change)="updateForm()" [readonly]="ticket.idStatus !== 5" />
            <span matSuffix>%</span>
        </mat-form-field>
        <app-file-upload [label]="'Reporte de Vulnerabilidades'" (onFile)="pushObjFile($event)" [control]="'vulReport'"></app-file-upload>
        <app-uploaded-file *ngIf="ticket && objFile" [objFile]="getFileByControl('vulReport')"></app-uploaded-file>
    </ng-container>
</form>