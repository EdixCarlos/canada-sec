<app-base-modal [modalTitle]=" 'MODALS.TITLE.REGION_CONFIG' | translate">
  <div modal-body>
    <form class="form form-label-right" [formGroup]="formGroup">
      <div class="form-group row">
        <div class="col-lg-12">
          <mat-form-field class="ols-form-control" appearance="fill">
            <mat-label [translate]="'MODALS.REGION_LABEL'"></mat-label>
            <mat-select (selectionChange)="onChangeRegion($event)" formControlName="region">
              <mat-option>--</mat-option>
              <mat-option *ngFor="let region of regionList" [value]="region.id">
                {{region.value}}
              </mat-option>
            </mat-select>
            <mat-error>
              <app-control-error [validationSignal]="validatorService.validateArray(formControls.region, 
                [{valType:'required',message:('VALIDATION.ERROR.REQUIRED' | translate)}])">
              </app-control-error>
            </mat-error>
          </mat-form-field>
        </div>
      </div>
      <div *ngIf="countryList.length > 0">
        <div class="form-group row">
          <div class="col-lg-12">
            <mat-form-field class="ols-form-control" appearance="fill">
              <mat-label [translate]="'MODALS.COUNTRY_LABEL'"></mat-label>
              <mat-select (selectionChange)="onChangeCountry($event)" formControlName="countries" multiple>
                <mat-option *ngFor="let country of countryList" [value]="country">
                  {{country.value}}
                </mat-option>
              </mat-select>
              <mat-error>
                <app-control-error [validationSignal]="validatorService.validateArray(formControls.countries, 
                [{valType:'required',message:('VALIDATION.ERROR.REQUIRED' | translate)}])">
                </app-control-error>
              </mat-error>
            </mat-form-field>
          </div>
        </div>
      </div>
      <div *ngIf="countryList.length > 0">
        <div class="form-group row">
          <div class="col-lg-12">
            <mat-form-field class="ols-form-control" appearance="fill">
              <mat-label [translate]="'MODALS.CISO_LABEL'"></mat-label>
              <textarea matInput [placeholder]="'MODALS.CISO_LABEL' | translate" [value]="cisoLocal" readonly></textarea>
            </mat-form-field>
          </div>
        </div>
      </div>
      <div *ngIf="entityList.length > 0">
        <div class="form-group row">
          <div class="col-lg-12">
            <mat-form-field class="ols-form-control" appearance="fill">
              <mat-label [translate]="'MODALS.ENTITY_LABEL'"></mat-label>
              <mat-select (selectionChange)="onChangeEntity($event)" formControlName="entities" multiple>
                <mat-option *ngFor="let entity of entityList" [value]="entity">
                  {{entity.value}}
                </mat-option>
              </mat-select>
              <mat-error>
                <app-control-error [validationSignal]="validatorService.validateArray(formControls.entities, 
                [{valType:'required',message:('VALIDATION.ERROR.REQUIRED' | translate)}])">
                </app-control-error>
              </mat-error>
            </mat-form-field>
          </div>
        </div>
      </div>
      <!-- <div *ngIf="countryList.length > 0">
        <div class="form-group row">
          <div class="col-lg-12">
            <ng-container formArrayName="countries" *ngFor="let country of countryList; let i = index">
              <div [formGroupName]="i">
                <mat-checkbox color="warn" formControlName="code">
                  {{country.value}}</mat-checkbox>
                  <mat-error>
                    <app-control-error [validationSignal]="validatorService.validateArray(formControls.countries, 
                      [{valType:'required',message:('VALIDATION.ERROR.REQUIRED' | translate)}])">
                    </app-control-error>
                  </mat-error>
              </div>
            </ng-container>
          </div>
        </div>
      </div> -->
    </form>
  </div>
  <div modal-footer>
    <button class="mr-6" mat-raised-button color="warn" (click)="this.closeModal()">
      {{ 'BUTTONS.CANCEL' | translate}}
    </button>
    <button mat-raised-button color="warn" (click)="save()">
      {{ 'BUTTONS.SAVE' | translate}}
    </button>

  </div>
</app-base-modal>